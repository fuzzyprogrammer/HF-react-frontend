(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[22],{1554:function(e,a,t){"use strict";t.d(a,"a",(function(){return c})),t.d(a,"f",(function(){return o})),t.d(a,"g",(function(){return d})),t.d(a,"d",(function(){return u})),t.d(a,"c",(function(){return p})),t.d(a,"e",(function(){return v})),t.d(a,"h",(function(){return h})),t.d(a,"b",(function(){return E}));var n=t(57),l=t.n(n),r=t(257),i=t(98),m=t(20),s=t.n(m);const c=()=>s.a.get("api/hfContactTypes"),o=()=>s.a.get("api/shelterTypes"),d=()=>s.a.get("api/shelterOwnerships"),u=()=>s.a.get("api/hfLanguages"),p=()=>s.a.get("api/hfReligions"),v=()=>s.a.get("api/rationCardTypes"),h=function(){var e=Object(i.a)(l.a.mark((function e(a){var t,n,i,m,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new FormData).append("address",a.address),t.append("city",a.city),t.append("contacts",JSON.stringify(a.contacts)),t.append("country",a.country),t.append("ration_img_url",a.ration_img_url),t.append("income",a.income),t.append("income_source",a.income_source),t.append("language",a.language),t.append("name",a.name),t.append("pincode",a.pincode),t.append("ration_card_no",a.ration_card_no),t.append("ration_card_type",a.ration_card_type),t.append("religion",a.religion),t.append("state",a.state),t.append("street",a.street),t.append("user_id",a.user_id),t.append("food_source",a.food_source),t.append("food_support_required",a.food_support_required),t.append("shelter_type",a.shelter_type),t.append("shelter_ownership",a.shelter_ownership),t.append("shelter_support_required",a.shelter_support_required),t.append("account_no",a.account_no),t.append("bank_name",a.bank_name),t.append("bank_branch",a.bank_branch),t.append("ifsc_code",a.ifsc_code),n=Object(r.a)(t.entries());try{for(n.s();!(i=n.n()).done;)m=i.value,console.log(m[0]+", "+m[1])}catch(l){n.e(l)}finally{n.f()}return e.next=30,s.a.post("api/hffamilies",t);case 30:return c=e.sent,e.abrupt("return",c);case 32:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),E=function(){var e=Object(i.a)(l.a.mark((function e(a){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("api/hffamilies/".concat(a));case 2:return t=e.sent,console.log(t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},2159:function(e,a,t){"use strict";t.r(a);var n=t(57),l=t.n(n),r=t(98),i=t(19),m=t(1),s=t.n(m),c=t(1415),o=t(1210),d=t(1278),u=t(1209),p=t(526),v=t(1274),h=t(1152),E=t(1166),f=t(2134),b=t(109),g=t(1247),_=t(1259),y=t(1248),x=t(1275),C=t(1249),S=t(558),O=t(1183),j=t(1554);var w=({values:e,handleChange:a,setFieldValue:t})=>{const n=Object(m.useState)(!0),l=Object(i.a)(n,2),r=l[0],o=l[1],d=Object(m.useState)([]),u=Object(i.a)(d,2),E=u[0],f=u[1];return Object(m.useEffect)((()=>(console.log("I am here to fetch the data"),Object(j.a)().then((({data:e})=>{r&&f(e)})),()=>o(!1))),[r]),s.a.createElement(c.a,{name:"contacts"},(t=>{var n;return s.a.createElement("div",{className:"overflow-auto"},s.a.createElement("p",null,"Contact Information"),s.a.createElement(g.a,{className:"whitespace-pre min-w-750"},s.a.createElement(_.a,null,s.a.createElement(y.a,null,s.a.createElement(x.a,{colSpan:5},"Contact Type "),s.a.createElement(x.a,{colSpan:5},"Value"),s.a.createElement(x.a,{colSpan:1,className:"p-0",align:"center"}))),s.a.createElement(C.a,null,null===(n=e.contacts)||void 0===n?void 0:n.map(((n,l)=>s.a.createElement(y.a,{className:"position-relative",key:l},s.a.createElement(x.a,{colSpan:5,className:"p-0",align:"left"},s.a.createElement(p.a,{fullWidth:!0,name:"contacts[".concat(l,"].type"),size:"small",variant:"outlined",value:n.type||"",onChange:a,select:!0},E.map(((e,a)=>s.a.createElement(v.a,{value:e,key:e},e.name))))),s.a.createElement(x.a,{colSpan:5,className:"p-0",align:"left"},s.a.createElement(p.a,{name:"contacts[".concat(l,"].value"),size:"small",variant:"outlined",type:"Email"===e.contacts[l].type&&0,fullWidth:!0,value:n.value||"",onChange:a})),s.a.createElement(x.a,{colSpan:1,className:"p-0",align:"center"},s.a.createElement(S.a,{size:"small",onClick:()=>t.remove(l)},s.a.createElement(O.a,{color:"error",fontSize:"small"},"clear")))))))),s.a.createElement(h.a,{className:"mt-4",color:"primary",variant:"contained",size:"small",onClick:()=>t.push({})},"+ Add New Contact"))}))},N=t(1151),k=t(132),z=t(114),W=t(40);const F=Object(N.a)((e=>({avatar:{display:"block",margin:"15px",border:"1px solid #ddd",borderRadius:"4px",padding:"5px",width:"150px",objectFit:"cover",cursor:"pointer"},root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}})));function R(e){return s.a.createElement(f.a,Object.assign({elevation:6,variant:"filled"},e))}a.default=()=>{const e=Object(W.i)().id,a=parseInt(e);console.log("This is ID "+a);const t=F(),n=Object(k.a)().user,f=Object(m.useState)(!0),g=Object(i.a)(f,2),_=g[0],y=g[1],x=Object(m.useState)([]),C=Object(i.a)(x,2),S=C[0],O=C[1],N=Object(m.useState)([]),T=Object(i.a)(N,2),q=T[0],I=T[1],B=Object(m.useState)([]),A=Object(i.a)(B,2),D=A[0],V=A[1],J=Object(m.useState)([]),L=Object(i.a)(J,2),U=L[0],M=L[1],P=Object(m.useState)([]),H=Object(i.a)(P,2),G=H[0],K=H[1],Q=Object(m.useState)({preview:"",raw:""}),X=Object(i.a)(Q,2),Y=X[0],Z=X[1],$=s.a.useState(!1),ee=Object(i.a)($,2),ae=ee[0],te=ee[1],ne=Object(m.useState)(),le=Object(i.a)(ne,2),re=le[0],ie=le[1];Object(m.useEffect)((()=>(Object(j.f)().then((({data:e})=>{_&&O(e)})),Object(j.g)().then((({data:e})=>{_&&I(e)})),Object(j.d)().then((({data:e})=>{_&&V(e)})),Object(j.c)().then((({data:e})=>{_&&M(e)})),Object(j.e)().then((({data:e})=>{_&&K(e)})),()=>y(!1))),[_]),Object(m.useEffect)((()=>{if(a){let e=Object(j.b)(a);200===e.status&&ie(e.data)}}),[a]),console.log(re);const me=e=>{e.target.files.length&&Z({preview:URL.createObjectURL(e.target.files[0]),raw:e.target.files[0]})},se=(e,a)=>{"clickaway"!==a&&te(!1)},ce=function(){var e=Object(r.a)(l.a.mark((function e(a,{isSubmitting:t}){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y.raw&&(a.ration_img_url=Y.raw),a.user_id=n.id,e.next=4,Object(j.h)(a).then((e=>{200===e.status&&(te(!0),setTimeout((()=>z.a.push("/pages/family-list")),2e3))}));case 4:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),oe={family_code:null===re||void 0===re?void 0:re.family_code,name:null===re||void 0===re?void 0:re.name,family_address_id:null===re||void 0===re?void 0:re.family_address_id,religion:null===re||void 0===re?void 0:re.religion,language_id:null===re||void 0===re?void 0:re.family_language_id,ration_card_type:null===re||void 0===re?void 0:re.ration_card_type,ration_card_no:null===re||void 0===re?void 0:re.ration_card_no,income:null===re||void 0===re?void 0:re.income,income_source:null===re||void 0===re?void 0:re.income_source,ration_img_url:null===re||void 0===re?void 0:re.ration_img_url,address:null===re||void 0===re?void 0:re.address,street:null===re||void 0===re?void 0:re.street,city:null===re||void 0===re?void 0:re.city,state:null===re||void 0===re?void 0:re.state,country:null===re||void 0===re?void 0:re.country,pincode:null===re||void 0===re?void 0:re.pincode,contacts:null===re||void 0===re?void 0:re.contacts};return s.a.createElement("div",{className:"m-sm-30"},s.a.createElement("div",{className:"mb-sm-30"},s.a.createElement(b.b,{routeSegments:[{name:"Families",path:"/pages/family-list"},{name:"Family Form"}]})),s.a.createElement(o.a,{elevation:3},s.a.createElement("div",{className:"flex p-4"},s.a.createElement("h4",{className:"m-0"},"New Family")),s.a.createElement(d.a,{className:"mb-2"}),s.a.createElement(c.b,{initialValues:oe,onSubmit:ce,enableReinitialize:!0},(({values:e,errors:a,touched:n,handleChange:l,handleBlur:r,handleSubmit:i,isSubmitting:m,setSubmitting:c,setFieldValue:o})=>s.a.createElement("form",{className:"p-4",onSubmit:i,autoCorrect:"off",autoComplete:"off"},s.a.createElement(u.a,{container:!0,spacing:3,alignItems:"center"},s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},"Name"),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement(p.a,{fullWidth:!0,label:"Name",name:"name",size:"small",variant:"outlined",value:e.name||"",onChange:l})),s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},"Religion"),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement(p.a,{fullWidth:!0,label:"Religion",name:"religion",size:"small",variant:"outlined",value:e.religion||"",onChange:l,select:!0},U.map(((e,a)=>s.a.createElement(v.a,{value:e.id,key:e.id},e.name))))),s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},"Ration Card Type"),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement(p.a,{fullWidth:!0,label:"Ration Card Type",name:"ration_card_type",size:"small",variant:"outlined",value:e.ration_card_type||"",onChange:l,select:!0},G.map(((e,a)=>s.a.createElement(v.a,{value:e,key:e},e))))),s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},"Ration Card No"),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement(p.a,{fullWidth:!0,label:"Ration Card No",name:"ration_card_no",size:"small",variant:"outlined",value:e.ration_card_no||"",onChange:l})),s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},"Food Source"),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement(p.a,{fullWidth:!0,label:"Food Source",name:"food_source",size:"small",variant:"outlined",value:e.food_source||"",onChange:l})),s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},"Food Support Required"),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement(p.a,{fullWidth:!0,label:"Food Support Required",name:"food_support_required",size:"small",variant:"outlined",value:e.food_support_required||"",onChange:l})),s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},"Income"),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement(p.a,{fullWidth:!0,label:"Income",name:"income",size:"small",variant:"outlined",value:e.income||"",onChange:l})),s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},"Income Source"),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement(p.a,{fullWidth:!0,label:"Income Source",name:"income_source",size:"small",variant:"outlined",value:e.income_source||"",onChange:l})),s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},"Shelter Type"),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement(p.a,{fullWidth:!0,label:"Shelter Type",name:"shelter_type",size:"small",variant:"outlined",value:e.shelter_type||"",onChange:l,select:!0},S.map(((e,a)=>s.a.createElement(v.a,{value:e.name,key:e.id},e.name))))),s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},"Shelter Ownership Type"),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement(p.a,{fullWidth:!0,label:"Shelter Ownership Type",name:"shelter_ownership",size:"small",variant:"outlined",value:e.shelter_ownership||"",onChange:l,select:!0},q.map(((e,a)=>s.a.createElement(v.a,{value:e.name,key:e.id},e.name))))),s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},"Shelter Support Required"),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement(p.a,{fullWidth:!0,label:"Shelter Support Required",name:"shelter_support_required",size:"small",variant:"outlined",value:e.shelter_support_required||"",onChange:l})),s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},"Mother Tongue"),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement(p.a,{fullWidth:!0,label:"Mother Tongue",name:"language",size:"small",variant:"outlined",value:e.language||"",onChange:l,select:!0},D.map(((e,a)=>s.a.createElement(v.a,{value:e.name,key:e.id},e.name))))),s.a.createElement(u.a,{item:!0,md:12,sm:12,xs:12},s.a.createElement(d.a,null),s.a.createElement("p",null,"Address Information")),s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},"Address"),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement(p.a,{fullWidth:!0,label:"Address",name:"address",size:"small",variant:"outlined",value:e.address||"",onChange:l})),s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},"Street"),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement(p.a,{fullWidth:!0,label:"Street",name:"street",size:"small",variant:"outlined",value:e.street||"",onChange:l})),s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},"City"),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement(p.a,{fullWidth:!0,label:"City",name:"city",size:"small",variant:"outlined",value:e.city||"",onChange:l})),s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},"State"),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement(p.a,{fullWidth:!0,label:"State",name:"state",size:"small",variant:"outlined",value:e.state||"",onChange:l})),s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},"Country"),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement(p.a,{fullWidth:!0,label:"Country",name:"country",size:"small",variant:"outlined",value:e.country||"",onChange:l})),s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},"Pincode"),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement(p.a,{fullWidth:!0,label:"Pincode",name:"pincode",size:"small",variant:"outlined",value:e.pincode||"",onChange:l})),s.a.createElement(u.a,{item:!0,xs:12},s.a.createElement(d.a,null)),s.a.createElement(u.a,{item:!0,xs:12},"Bank Details"),s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},"Account No"),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement(p.a,{fullWidth:!0,label:"Account No",name:"account_no",size:"small",variant:"outlined",value:e.account_no||"",onChange:l})),s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},"IFSC Code"),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement(p.a,{fullWidth:!0,label:"IFSC Code",name:"ifsc_code",size:"small",variant:"outlined",value:e.ifsc_code||"",onChange:l})),s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},"Bank Name"),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement(p.a,{fullWidth:!0,label:"Bank Name",name:"bank_name",size:"small",variant:"outlined",value:e.bank_name||"",onChange:l})),s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},"Bank Branch"),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement(p.a,{fullWidth:!0,label:"Bank Branch",name:"bank_branch",size:"small",variant:"outlined",value:e.bank_branch||"",onChange:l})),s.a.createElement(u.a,{item:!0,xs:12},s.a.createElement(d.a,null)),s.a.createElement(u.a,{item:!0,md:2,sm:4,xs:12},Y.preview?s.a.createElement(h.a,{style:{color:"red"},variant:"text",onClick:()=>Z({preview:"",raw:""})},"Delete"):s.a.createElement("p",null,"Upload Ration Card")),s.a.createElement(u.a,{item:!0,md:4,sm:8,xs:12},s.a.createElement("label",{htmlFor:"upload-button"},Y.preview?s.a.createElement("img",{src:Y.preview,alt:"profile-pic",className:t.avatar}):s.a.createElement(s.a.Fragment,null,s.a.createElement("img",{src:(null===oe||void 0===oe?void 0:oe.ration_img_url)||"/assets/images/file-types/007-jpg.svg",className:t.avatar,alt:"avatar"}))),s.a.createElement("input",{accept:"image/*",type:"file",id:"upload-button",className:"hidden",onChange:me})),s.a.createElement(u.a,{item:!0,xs:12},s.a.createElement(d.a,null))),s.a.createElement("div",{className:"mb-8"},s.a.createElement(w,{values:e,setFieldValue:o,handleChange:l})),s.a.createElement("div",{className:"mt-6"},s.a.createElement(h.a,{color:"primary",variant:"contained",type:"submit"},"Submit")),s.a.createElement(E.a,{open:ae,autoHideDuration:2e3,onClose:se},s.a.createElement(R,{onClose:se,severity:"success"},"Sucessfully Added New Family!")))))))}}}]);