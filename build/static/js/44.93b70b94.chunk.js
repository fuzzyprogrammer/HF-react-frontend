(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[44],{1381:function(e,t,a){"use strict";var r=a(4),n=a(3),c=a(1),s=(a(0),a(5)),o=a(10),i=a(547),l=a(13),m=c.forwardRef((function(e,t){var a=e.children,o=e.classes,m=e.className,d=e.color,u=void 0===d?"default":d,h=e.component,p=void 0===h?"button":h,b=e.disabled,f=void 0!==b&&b,g=e.disableFocusRipple,v=void 0!==g&&g,x=e.focusVisibleClassName,E=e.size,w=void 0===E?"large":E,j=e.variant,y=void 0===j?"round":j,O=Object(r.a)(e,["children","classes","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"]);return c.createElement(i.a,Object(n.a)({className:Object(s.default)(o.root,m,"round"!==y&&o.extended,"large"!==w&&o["size".concat(Object(l.a)(w))],f&&o.disabled,{primary:o.primary,secondary:o.secondary,inherit:o.colorInherit}[u]),component:p,disabled:f,focusRipple:!v,focusVisibleClassName:Object(s.default)(o.focusVisible,x),ref:t},O),c.createElement("span",{className:o.label},a))}));t.a=Object(o.a)((function(e){return{root:Object(n.a)({},e.typography.button,{boxSizing:"border-box",minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]},color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground},textDecoration:"none"},"&$focusVisible":{boxShadow:e.shadows[6]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},primary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},secondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},extended:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48,"&$sizeSmall":{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"&$sizeMedium":{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},focusVisible:{},disabled:{},colorInherit:{color:"inherit"},sizeSmall:{width:40,height:40},sizeMedium:{width:48,height:48}}}),{name:"MuiFab"})(m)},1441:function(e,t,a){"use strict";var r,n,c,s=a(1588),o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function i(){c=!1}function l(e){if(e){if(e!==r){if(e.length!==o.length)throw new Error("Custom alphabet for shortid must be "+o.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,a){return t!==a.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+o.length+" unique characters. These characters were not unique: "+t.join(", "));r=e,i()}}else r!==o&&(r=o,i())}function m(){return c||(c=function(){r||l(o);for(var e,t=r.split(""),a=[],n=s.nextValue();t.length>0;)n=s.nextValue(),e=Math.floor(n*t.length),a.push(t.splice(e,1)[0]);return a.join("")}())}e.exports={get:function(){return r||o},characters:function(e){return l(e),r},seed:function(e){s.seed(e),n!==e&&(i(),n=e)},lookup:function(e){return m()[e]},shuffled:m}},1552:function(e,t,a){"use strict";var r=a(4),n=a(1),c=a.n(n),s=a(1363),o=a(1151);const i=Object(o.a)((e=>{e.palette,Object(r.a)(e,["palette"]);return{avatar:{height:"40px",width:"40px"},status_circle:{position:"absolute",height:"14px",width:"14px",borderRadius:"7px",bottom:"0px",right:"-3px",border:"2px solid white"}}}));t.a=({src:e,status:t})=>{const a=i();return c.a.createElement("div",{className:"relative"},c.a.createElement(s.a,{className:a.avatar,src:e}),c.a.createElement("div",{className:"".concat(a.status_circle," ").concat("online"===t?"bg-primary":"bg-error")}))}},1586:function(e,t,a){"use strict";e.exports=a(1587)},1587:function(e,t,a){"use strict";var r=a(1441),n=a(1589),c=a(1593),s=a(1594)||0;function o(){return n(s)}e.exports=o,e.exports.generate=o,e.exports.seed=function(t){return r.seed(t),e.exports},e.exports.worker=function(t){return s=t,e.exports},e.exports.characters=function(e){return void 0!==e&&r.characters(e),r.shuffled()},e.exports.isValid=c},1588:function(e,t,a){"use strict";var r=1;e.exports={nextValue:function(){return(r=(9301*r+49297)%233280)/233280},seed:function(e){r=e}}},1589:function(e,t,a){"use strict";var r,n,c=a(1590);a(1441);e.exports=function(e){var t="",a=Math.floor(.001*(Date.now()-1567752802062));return a===n?r++:(r=0,n=a),t+=c(7),t+=c(e),r>0&&(t+=c(r)),t+=c(a)}},1590:function(e,t,a){"use strict";var r=a(1441),n=a(1591),c=a(1592);e.exports=function(e){for(var t,a=0,s="";!t;)s+=c(n,r.get(),1),t=e<Math.pow(16,a+1),a++;return s}},1591:function(e,t,a){"use strict";var r,n="object"===typeof window&&(window.crypto||window.msCrypto);r=n&&n.getRandomValues?function(e){return n.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],a=0;a<e;a++)t.push(Math.floor(256*Math.random()));return t},e.exports=r},1592:function(e,t){e.exports=function(e,t,a){for(var r=(2<<Math.log(t.length-1)/Math.LN2)-1,n=-~(1.6*r*a/t.length),c="";;)for(var s=e(n),o=n;o--;)if((c+=t[s[o]&r]||"").length===+a)return c}},1593:function(e,t,a){"use strict";var r=a(1441);e.exports=function(e){return!(!e||"string"!==typeof e||e.length<6)&&!new RegExp("[^"+r.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e)}},1594:function(e,t,a){"use strict";e.exports=0},1596:function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return s})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"e",(function(){return l}));var r=a(20),n=a.n(r);const c=e=>n.a.get("/api/chat/contacts",{data:e}),s=e=>n.a.get("/api/chat/contacts/recent",{data:e}),o=e=>n.a.get("/api/chat/contacts/all",{data:e}),i=(e,t)=>n.a.get("/api/chat/chat-room",{data:{currentUser:e,contactId:t}}),l=e=>n.a.post("/api/chat/add",e)},2140:function(e,t,a){"use strict";a.r(t);var r=a(7),n=a(19),c=a(1),s=a.n(c),o=a(1115),i=a(1210),l=a(109),m=a(1596),d=a(4),u=a(1552),h=a(1421),p=a.n(h),b=a(1278),f=a(2053),g=a(1151),v=a(5);const x=Object(g.a)((e=>{e.palette,Object(d.a)(e,["palette"]);return{chatSidenav:{borderRight:"1px solid rgba(0, 0, 0, 0.08)",height:450}}}));var E=({currentUser:e,contactList:t=[],recentContactList:a=[],handleContactClick:r})=>{const n=x();return s.a.createElement("div",{className:Object(v.default)("bg-default",n.chatSidenav)},s.a.createElement("div",{className:"chat-sidenav__topbar flex items-center h-56 px-4 bg-primary"},s.a.createElement(u.a,{src:e.avatar,status:e.status}),s.a.createElement("h5",{className:"ml-4 whitespace-pre mb-0 font-medium text-18 text-white"},e.name)),s.a.createElement(p.a,{className:"relative h-full"},a.map(((e,t)=>s.a.createElement("div",{onClick:()=>r(e.id),key:t,className:"flex items-center p-4 cursor-pointer  gray-on-hover"},s.a.createElement(u.a,{src:e.avatar,status:e.status}),s.a.createElement("div",{className:"pl-4"},s.a.createElement("p",{className:"m-0"},e.name),s.a.createElement("p",{className:"m-0 text-muted"},Object(f.a)(new Date(e.lastChatTime).getTime(),"MMMM dd, yyyy")))))),s.a.createElement(b.a,null),t.map(((e,t)=>s.a.createElement("div",{onClick:()=>r(e.id),key:t,className:"flex items-center px-4 py-1 cursor-pointer  gray-on-hover"},s.a.createElement(u.a,{src:e.avatar,status:e.status}),s.a.createElement("div",{className:"pl-4"},s.a.createElement("p",null,e.name)))))))},w=a(1213),j=a(558),y=a(1183),O=a(1274),N=a(526),C=a(1381);const k=Object(g.a)((e=>{e.palette,Object(d.a)(e,["palette"]);return{icon:{fontSize:"4rem"}}}));var S=()=>{const e=k();return s.a.createElement("div",{className:"h-220 w-220 rounded elevation-z6 bg-default flex justify-center items-center"},s.a.createElement(y.a,{className:e.icon,color:"primary"},"chat"))},M=a(113),R=a(1586),I=a.n(R);const V=Object(g.a)((e=>{e.palette,Object(d.a)(e,["palette"]);return{chatContainer:{background:"rgba(0, 0, 0, 0.05)",height:450}}}));var z=({id:e,toggleSidenav:t,currentChatRoom:a,opponentUser:r,messageList:o=[],handleMessageSend:i})=>{const m=Object(c.useState)(""),d=Object(n.a)(m,2),h=d[0],f=d[1],g=V();return s.a.createElement("div",{className:Object(v.default)("flex-column relative",g.chatContainer)},s.a.createElement("div",{className:"chat-container__topbar flex items-center justify-between p-1 bg-primary"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement(w.a,{mdUp:!0},s.a.createElement(j.a,{onClick:t},s.a.createElement(y.a,{className:"text-white"},"short_text"))),s.a.createElement(w.a,{smDown:!0},s.a.createElement("div",{className:"pl-3"})),r&&s.a.createElement(c.Fragment,null,s.a.createElement(u.a,{src:r.avatar,status:r.status}),s.a.createElement("h5",{className:"ml-4 whitespace-pre mb-0 font-medium text-18 text-white"},r.name))),s.a.createElement(l.n,{menuButton:s.a.createElement(j.a,null,s.a.createElement(y.a,{className:"text-white"},"more_vert"))},s.a.createElement(O.a,{className:"flex items-center"},s.a.createElement(y.a,{className:"mr-4"},"account_circle")," Contact"),s.a.createElement(O.a,{className:"flex items-center"},s.a.createElement(y.a,{className:"mr-4"},"volume_mute")," Mute"),s.a.createElement(O.a,{className:"flex items-center"},s.a.createElement(y.a,{className:"mr-4"},"delete")," Clear Chat"))),s.a.createElement(p.a,{className:"chat-message-list flex-grow relative",id:"chat-message-list"},""===a&&s.a.createElement("div",{className:"flex-column justify-center items-center h-full"},s.a.createElement(S,null),s.a.createElement("p",null,"Select a contact")),o.map(((t,a)=>s.a.createElement("div",{className:"flex items-start px-4 py-3",key:I.a.generate()},s.a.createElement(u.a,{src:t.avatar,status:t.status}),s.a.createElement("div",{className:"ml-4"},s.a.createElement("p",{className:"text-muted m-0 mb-2"},t.name),s.a.createElement("div",{className:Object(v.default)({"px-4 py-2 mb-2 border-radius-4 bg-paper":!0,"bg-primary text-white":e===t.contactId})},s.a.createElement("span",{className:"whitespace-pre-wrap"},t.text)),s.a.createElement("small",{className:"text-muted mb-0"},Object(M.d)(new Date(t.time))," ago")))))),s.a.createElement(b.a,null),""!==a&&s.a.createElement("div",{className:"flex items-center px-4 py-2"},s.a.createElement(N.a,{label:"Type your message here*",value:h,onChange:e=>f(e.target.value),onKeyUp:e=>{if("Enter"===e.key&&!e.shiftKey){let e=h.trim();""!==e&&i(e),f("")}},fullWidth:!0,multiline:!0,rows:1,variant:"outlined"}),s.a.createElement("div",null,s.a.createElement(C.a,{onClick:()=>{""!==h.trim()&&i(h),f("")},color:"primary",className:"ml-4"},s.a.createElement(y.a,null,"send")))))},_=a(48);t.default=()=>{const e=document.querySelector("#chat-message-list"),t=Object(c.useState)(!0),a=Object(n.a)(t,2),d=a[0],u=a[1],h=Object(c.useState)({id:"7863a6802ez0e277a0f98534"}),p=Object(n.a)(h,2),b=p[0],f=p[1],g=Object(c.useState)(null),v=Object(n.a)(g,2),x=v[0],w=v[1],j=Object(c.useState)(""),y=Object(n.a)(j,2),O=y[0],N=y[1],C=Object(c.useState)([]),k=Object(n.a)(C,2),S=k[0],M=k[1],R=Object(c.useState)([]),I=Object(n.a)(R,2),V=I[0],L=I[1],T=Object(c.useState)([]),U=Object(n.a)(T,2),D=U[0],$=U[1],q=Object(c.useRef)(b),W=Object(_.a)(),F=Object(o.a)(W.breakpoints.down("sm")),H=Object(c.useCallback)((()=>{let e=q.current.id;Object(m.d)(e).then((e=>{L(e.data)}))}),[]);Object(c.useEffect)((()=>{let e=q.current.id;Object(m.c)(e).then((e=>{u(F),f(Object(r.a)({},e.data))})),Object(m.a)(b.id).then((e=>M(e.data))),H()}),[F,b.id,H]);const B=()=>{e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},A=()=>{u(!d)};return s.a.createElement("div",{className:"m-sm-30"},s.a.createElement("div",{className:"mb-sm-30"},s.a.createElement(l.b,{routeSegments:[{name:"Chat"}]})),s.a.createElement(i.a,{elevation:6},s.a.createElement(l.r,null,s.a.createElement(l.q,{width:"230px",open:d,toggleSidenav:A},s.a.createElement(E,{currentUser:b,contactList:S,recentContactList:V,handleContactClick:e=>{F&&A(),Object(m.c)(e).then((({data:e})=>{w(Object(r.a)({},e))})),Object(m.b)(b.id,e).then((({data:e})=>{let t=e.chatId,a=e.messageList,r=e.recentListUpdated;N(t),$(a),B(),r&&H()}))}})),s.a.createElement(l.s,null,s.a.createElement(z,{id:null===b||void 0===b?void 0:b.id,opponentUser:x,messageList:D,currentChatRoom:O,handleMessageSend:e=>{let t=b.id;""!==O&&(Object(m.e)({chatId:O,text:e,contactId:t,time:new Date}).then((e=>{$([...e.data]),B()})),setTimeout((()=>{Object(m.e)({chatId:O,text:"Hi, I'm ".concat(x.name,". Your imaginary friend."),contactId:x.id,time:new Date}).then((e=>{$([...e.data]),B()}))}),750))},toggleSidenav:A})))))}}}]);